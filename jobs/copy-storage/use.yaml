runs:
  - name: copy-storage
    image: mcr.microsoft.com/azure-cli:2.15.1
    env:
      - name: SOURCE_CONTAINER
        value: "{{ $.with.sourceVolumeContainer }}"
      - name: SOURCE_ACCOUNT_NAME
        valueFrom:
          secretKeyRef:
            name: "{{ $.with.sourceVolumeSecret }}"
            key: azurestorageaccountname
      - name: SOURCE_ACCOUNT_KEY
        valueFrom:
          secretKeyRef:
            name: "{{ $.with.sourceVolumeSecret }}"
            key: azurestorageaccountkey
      - name: DESTINATION_CONTAINER
        value: "{{ $.with.destinationVolumeContainer }}"
      - name: DESTINATION_ACCOUNT_NAME
        valueFrom:
          secretKeyRef:
            name: "{{ $.with.destinationVolumeSecret }}"
            key: azurestorageaccountname
      - name: DESTINATION_ACCOUNT_KEY
        valueFrom:
          secretKeyRef:
            name: "{{ $.with.destinationVolumeSecret }}"
            key: azurestorageaccountkey
    run: /action/copy-storage.sh



# use: "copy-storage"
# with:
#   sourceVolumeSecret: 
#   sourceVolumeContainer: 
#   destinationVolumeSecret: 
#   destinationVolumeContainer: 